/*                                                   ###########
////////////////////////////////////////////////////////  ||   ////////////////////////////////////////////////////////
/////  --package   : hilmacs.js  {minified version}  ///  ||   /////  --dev for : Hilmacs School System             ///
/////  --CopyRight : Wibgates Kenneth 2017           ///  ||   /////  --Version : Hilmacs Node.js V10               ///
/////  --Email     : wibgates@hilmacs.com            ///  ||   /////  --Site    : www.cdn.hilmacs.com/library/js    ///
/////  --twitter   : @wifigates                      ///  ||   /////  --Git.Rep : @wibgates/hilmacs                 ///
////////////////////////////////////////////////////////  ||   ////////////////////////////////////////////////////////
												                              ##########*/
"use strict";
/**
 * hilmacs global vars
*/
var hmService , hmPath , hmHapi ;
/**
 * hilmacs service main object
 * created to allow property , object , function re-usability
 * and allow easy function calling
*/
   hmService = new Object();
/**
 * hilmacs path object contains / defines standard
 * system/application url , uri's and fttp paths
*/
   hmPath    = new Object();
/**
 * hilmacs hapi {h=>hilmacs,api=>application programmers interface}
 * this object listens to requests inform of parameters
 * from client or a hilmacs developer
 * and provides results as a JSON object
*/
   hmHapi    = new Object();

/**
 * array cabin.
*/
 hmService.array   = new Array();
/**
* Convert an Array-like object to a real Array.
*/
   hmService.array.toArray = (list, start) => {
     start = start || 0;
     var i = list.length - start;
     var ret = new Array(i);
     while (i--) {
       ret[i] = list[i + start];
     }
     return ret ;
   }

/**
 * hilmacs merge arrays of equal length
 * and return an object
*/
 hmService.array.merge = (z,w) => {
   if (z.length === w.length) {
     var a = {};//isEmptyObject
     for(var i=0; i < z.length; i++) {
         a[z[i]] = w[i];
     }
     return a ;
   }else {
     return null ;
   }
 }
 /**
  * hilmacs filter
 */
 hmService.filter = new Object();
 /**
  * hilmacs remove the last ',' from would be hilmacs Objects
  * passed in by the user as data
 */
 hmService.filter.strings = (x,y) => {
    //return x.replace(y, /\s*$/, null );;
 }
/**
 * Quick object check - this is primarily used to tell
 * Objects from primitive values when we know the value
 * is a JSON-compliant type.
 */
hmService.isObject = (obj) => {
  return obj !== null && typeof obj === 'object'
}

/**
 * Get the raw type string of a value e.g. [object Object]
 */
var _toString = Object.prototype.toString;

function toRawType (value) {
  return _toString.call(value).slice(8, -1)
}

/**
 * Strict object type check. Only returns true
 * for plain JavaScript objects.
 */
function isPlainObject (obj) {
  return _toString.call(obj) === '[object Object]'
}

function isRegExp (v) {
  return _toString.call(v) === '[object RegExp]'
}

/**
 * Check if val is a valid array index.
 */
function isValidArrayIndex (val) {
  var n = parseFloat(String(val));
  return n >= 0 && Math.floor(n) === n && isFinite(val)
}

/**
 * Convert a value to a string that is actually rendered.
 */
hmService.toString =  (val) => {
  return val == null
    ? ''
    : typeof val === 'object'
      ? JSON.stringify(val, null, 2)
      : String(val)
}

/**
 * Convert a input value to a number for persistence.
 * If the conversion fails, return original string.
 */
hmService.toNumber =  (val) => {
  var n = parseFloat(val);
  return isNaN(n) ? val : n
}

/**
 * Make a map and return a function for checking if a key
 * is in that map.
 */
hmService.makeMap =  (str,expectsLowerCase ) => {
  var map = Object.create(null);
  var list = str.split(',');
  for (var i = 0; i < list.length; i++) {
    map[list[i]] = true;
  }
  return expectsLowerCase
    ? function (val) { return map[val.toLowerCase()]; }
    : function (val) { return map[val]; }
}

/**
 * Check if a tag is a built-in tag.
 */
var isBuiltInTag = hmService.makeMap('slot,component', true);

/**
 * Check if a attribute is a reserved attribute.
 */
var isReservedAttribute = hmService.makeMap('key,ref,slot,slot-scope,is');

/**
 * Remove an item from an array
 */
hmService.chopFromArray = (arr, item) => {
  if (arr.length) {
    var index = arr.indexOf(item);
    if (index > -1) {
      return arr.splice(index, 1) ;
    }
  }
}
/**
 * hilmacs standard api gateways
*/
hmHapi.gateway = {
	local : '/hapi/' ,
	secure: '/secure/hapi/' ,
	web   : 'https://www.api.hilmacs.com/listen/',
  cdn   : 'http://cdn.hilmacs.com/hapi/req.php'
}
/**
 * hilmacs authentication protocols
*/
hmHapi.authenticate = {
	secret : null ,
	key    : {
		public  : null ,
		private : null
	} ,
	envinroment : {
     development : true ,
		 production  : false
	}
}
/**
 * hilmacs hapi's standard gate request path
*/
hmPath.gate = (x,y,z) => {
	if (y == 'secure' ) {
	return  hmHapi.gateway.secure + x + '/' + z ;
	} else if (y == 'web') {
		return  hmHapi.gateway.web + x + '/' + z  ;
	}else if (y == 'cdn') {
	return  hmHapi.gateway.cdn  ;
	}else{
		return  hmHapi.gateway.local + x + '/' + z  ;
	}
}
/**
 * check if object empty
*/
hmService.isEmptyObject = (x) => {
	if (jQuery.isEmptyObject(x)) {
		return false;
	}else {
		return true;
	}
}

// hilmacs account main container
hmService.account = {
  create : null ,
  teacher : {
    subjects  : null ,
    classes   : null ,
    timeTable : null ,
    profile   : null
  } ,
  student : {
    profile : null
  }
}

// hilmacs main vars
hmService.vars = {
  array : {
    int  : [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],
    str  : ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'],
    date : ['mn','tu','wn','th','fr','sa','su']
  } ,
  json : {
    int : {a:null,b:null,c:null,d:null,e:null,f:null,g:null,h:null,i:null,j:null,k:null,l:null,m:null,n:null,o:null,p:null,q:null,r:null,s:null,t:null,u:null,v:null,w:null,x:null,y:null,z:null}
  },
  grades:{
     ug:{
       std:{
         prim:{d1:90,d2:80,c3:70,c4:60,c5:50,c6:40,p7:30,p8:20,f9:10},
         col:{
           p2:{a:'d2',b:'c3',c:'c4',d:'c5',e:'c6',o:'p7',f:'p8'},
           p3:{a:'c3',b:'c4',c:'c5',d:'c6',e:'p7',o:'p8',f:'f9'}
         }
       },
       class:{
         max:{
           pprim:'TOP CLASS',
           prim:7,
           col:{
             o:4,
             a:6
           }
         }
       }
     },
     ky:{
       std:{
         prim:{d1:90,d2:80,c3:70,c4:60,c5:50,c6:40,p7:30,p8:20,f10:10},
         col:{a:'c3',b:'c4',c:'c5',d:'c6',e:'p7',o:'p8',f:'f9'}
       }
     },
     sa:{
       std:{
         prim:{d1:90,d2:80,c3:70,c4:60,c5:50,c6:40,p7:30,p8:20,f9:10},
         col:{a:'c3',b:'c4',c:'c5',d:'c6',e:'p7',f:'p8',ff:'f9'}
       }
     }
  }
}

// Cookies
hmService.hcwr = (name, value, days) => {
		if (days) {
				var date = new Date();
				date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
				var expires = "; expires=" + date.toGMTString();
		}
		else var expires = "";

		document.cookie = name + "=" + value + expires + "; path=/";
}

hmService.hcr = (name) => {
		var nameEQ = name + "=";
		var ca = document.cookie.split(';');
		for (var i = 0; i < ca.length; i++) {
				var c = ca[i];
				while (c.charAt(0) == ' ') c = c.substring(1, c.length);
				if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
		}
		return null;
}

hmService.hcdel = (name) => {
	 return hmService.hcwr(name, null , -1);
}

hmService.redirect = (pg,x= null ) => {
   if (x) {
     return window.location.reload();
   }else {
     return document.location.href = pg ;
   }
}

/**
 * check user existance
*/
hmService.userExists =  (a) => {
  $.get(hmPath.gate('users',null,'check/'+a) , (data) => {
    if (jQuery.isEmptyObject(data)) {
      return 0 ;
    }else {
      return 1 ;
    }
  });
}

/**
 * envinroment
*/
$.getJSON(hmPath.gate('controls',null,'data/env'), (data) => {
  if (jQuery.isEmptyObject(data)) {
    hmService.hcwr('env',1,360);
  }else {
    hmService.hcwr('env',1,360);
  }
});

// return envinroment
hmService.settings = new Object();


// require envinroment
hmService.settings.env = () => {
   var x = hmService.hcr('env') ;
   if (x == 1 ) {
     return 'prim';
   } else if (x == 2 ) {
     return 'col';
   }else {
     return 'prim';
   }
}


/**
 * hilmacs time hmService.mtime()
 * supported by moment.js
*/
hmService.mtime   = new Object();
// hilmacs time
hmService.mtime.now    = (x) => {
   if (x=='time') {
     return moment().format('LTS');
   }else if (x=='date') {
     return moment().format('l');
   }else if(x=='stamp') {
     return moment().format('l')+' '+moment().format('LTS') ;
   }else if (x=='y') {
     return parseInt(moment().format('YYYY')) ;
   }else if (x=='m') {
     return parseInt(moment().format('M')) ;
   }else if (x=='d') {
     return parseInt(moment().format('D')) ;
   }else {
     return moment().format('l')+' '+moment().format('l') ;
   }
}

//year on which the the school go established
hmService.mtime.loop = hmService.mtime.now('y');
while ( hmService.mtime.loop >= 1999) {
   var x = hmService.mtime.loop-- ;
   $('.hm-sv-years').append(`<option value="${x}">${x}</option>`);
}
/**
 * controls modals
*/
hmService.modals = new Object();

/**
 * hilmacs default warning modal
*/
hmService.modals.warn = (a,x,y) => {
  $('#hm-modal-warn-'+a).modal('show');
  $('.hm-modal-warn-body').html(x);//body
  $('#hm-modal-warn-hd').html(y);//head
  setInterval( () => {
     $('#hm-modal-warn').modal('hide');
  } , 10000);
}

/**
 * hilmacs prettyfy data
*/
hmService.pretty = new Object();

//prettyfy global
hmService.pretty.global = (x,y) => {
  //x : path to api
  //y: id of data
  $.getJSON(hmPath.gate(x,null,'data/'+y), (data) => {
    //first delete the existing One
    hmService.hcdel('hpg');
    //then create
    hmService.hcwr('hpg',data.hcName,1);
  });
}

/**
 * hilmacs default css
*/
hmService.css = new Object();
//color
hmService.css.color = (x,y) => {
   switch (x) {
     case 'red':
         return `<span class="redText">${y}</span>`;
       break;
     case 'green':
         return `<span class="greenText">${y}</span>`;
       break;
     default:
       return `<span class="redText">${y}</span>`;
   }
}

hmService.css.transform = (x,y) => {
   switch (x) {
     case 'cap':
         return y.toUpperCase();
       break;
     case 'low':
         return y.toLowerCase();
       break;
     default:
       return x;
   }
}

/**
 * check DOM
*/

$(document).ready( () => {

  /**
   * some nice walk in
  */
  $('tr').addClass('animated fadeIn');
  $('.hm-nav-bar-aside').addClass('animated fadeIn');
  $('.hm-mv-accounts-v-port').addClass('animated fadeIn');

  /**
   * hide elements off
  */
  hmService.hideElem = (a) => {  $("."+a+"").hide('slow'); }

  //show elements
  hmService.showElem = (a) => {  $("."+a+"").show('slow'); }

  //write html into element
  hmService.html  = (a,b) => {  $(""+a+"").html(`${b}`); }

  //write abbr in full
  hmService.abbr = ({
     lang: { en:'English', cn:'Chineese', fr:'French', kws:'Swahili', sa:'Afrikaana', su:'Sudaneese', zb:'Shona' },
     country:{ug:'Uganda',cn:'China',ky:'Kenya',sa:'South Africa',su:'Sunda',zb:'Zimbabwe',fr:'France',en:'Great Britain'}
  });

  /**
   * hilmacs hapi {configs}
  */
  $.getScript('/js/jet.pwr/hilmacs.hapi.js');

  /**
   * Hilmacs Jet Power view controller
  */
	 $.getScript('/js/jet.pwr/hilmacs.mvc.js');

		jQuery.ajaxSettings.traditional = true ;
     // SET GLOBALS
		 // enable PUT,DELETE
		 jQuery.each( [ "put", "delete" ], function( i, method ) {
			  jQuery[ method ] = function( url, data, callback, type ) {
			    if ( jQuery.isFunction( data ) ) {
			      type = type || callback;
			      callback = data;
			      data = undefined;
			    }

			    return jQuery.ajax({
			      url: url,
			      type: method,
			      dataType: type,
			      data: data,
			      success: callback
			    });
			  };
			});

			// hilmacs default comment
      $( ".print" ).click( () => {
         // hilmacs default comment
          window.print();
      });

		 // system random number for students id's start
		 hmService.hcwr('studentIdStart' , 0 , 360);

		 // save loader to cookie
	   hmService.hcwr('loaderIcon_sm' , "<img class='img' src='/img/loaders/saving.png'>" , 360);

		 // implement changes on fly
		 hmService.tempCompany =  (x,y,z) => {
		 	var a = $('.'+x).val();
		 	var a = a.trim();
		 	if(a){
				// store company data in locals
				hmService.hcwr( z , a , 360);
				$('.'+y).html( hmService.hcr(z) );
				 // upadate all changes
				 $('.save-ansyc').fadeIn('slow',  () => {
					   $('.hm-data-a-auto-save-btn').html("<i class='mdi-content-save pull-left'></i> Save All Changes");
				 	   $('.save-ansyc').removeClass('hm-disp-off-no-animation');
						 $('.hm-data-a-auto-save-btn').removeClass('disabled');
				 })
		 	}else {
		 		alert(hmLang.locals('noChg'));
		 	}
		 }

		 // save single data
		 hmService.saveCompany = (a,b) => {
			 var c = a ;
			 var params = {
				 a:hmService.hcr(b)+"="+a // cookie to be saved
			 }
			 $.put(hmPath.gate('company',null,'data/'), params ).done( () => {
					// saving changes
			}).fail( () => {
				// report error as bug
				console.log('put failed...');
			});
		 }

		 // remove data globaly without animation
		 hmService.delete = (x,z) => { // where{x=>path,z=>id}
		   $.delete(hmPath.gate(x,null,'data/'+z), params ).done( () => {
       	  // wibgates do smth...
       });
		 }

		 // update all changes
		 $( ".hm-data-a-auto-save" ).click( () => {
		    // upadate all changes
				//var a_amplify = {"name":hmService.hcr('cname'),"address":hmService.hcr('caddress'),"slogan":hmService.hcr('cclogan'),"regno":hmService.hcr('ccregno')+'/'};
				//$.post('/hapi/company/data/', { 'cdata' : a_amplify } ).done( () => {
				$.post(hmPath.gate('company',null,'data/'), { "cname":hmService.hcr('cname'),"caddress":hmService.hcr('caddress'),"cslogan":hmService.hcr('cclogan'),"cregno":hmService.hcr('ccregno')} ).done( () => {
           // saving changes
					 $('.hm-data-a-auto-save').fadeOut(8000) ; //global
				}).always( () => {
					$('.hm-data-a-auto-save-btn').addClass('disabled');
			    $('.hm-data-a-auto-save-btn').html(hmService.hcr('loaderIcon_sm')+" Saving...");
			  }).fail( () => {
					// report error as bug
					$.get('/errors/bugs/', { 'bug_body' : 'cdata response to server failed data : '+a_amplify } );
				});
		 });

     // bolden text
		 $('.b').css({ 'font-weight': 'bold' });

		 // system student number

	   // set system name {lable}
		 $('.systemLabel').append('Hilmacs School System');

		 // set system local default address
		 $('.systemLocalAddress').append('Ministers Village Ntinda , Block 234 , Ntinda Kampala Ug');

		 // local slogan
		 $('.systemcslogan').append("<q>Long leave Wibgates Kenneth The Great</q>");

		 // hilmacs default comment
		 $('.systemctype').append('Primary Institute');

		 $('.systemcsReg').append('U000/__');

		 // hilmacs truck id
		 $('.truckId').append(hmService.hcr('ccregno'));

		 // set input place holder
		 $(".hm-inpt-search-top").attr("placeholder", "Search student's report , profile here....");
		 $('.hm-inpt-search-top').addClass('.hm-inpt-placeholder');

		 $('.hm-inpt-a1').val(parseInt(hmService.hcr('studentIdStart'))+1);

		 // --set default address mask
		 $('.p-address').attr("placeholder" , 'Ministers Village Ntinda , Block 234 , Ntinda Kampala Ug' );
		 // set default email mask
		 $('.p-email').attr("placeholder","example@gmail.com , john@hilmacs.com")
		 // --set default phone number mask
		 $('.p-tel').attr("placeholder" , '+1 000 00 00 00' );

		 // --set default phone number mask
 		 $('.p-password').attr("placeholder" , '*******' );

		 // --set default phone number mask
		 $('.p-fullnames').attr("placeholder" , 'Wibgates The Great' );

		 // --enabling extreme lightening complex but fast changes@front end
		 var cdataPan = [hmService.hcr('cname'),hmService.hcr('caddress'),hmService.hcr('cclogan'),hmService.hcr('ccregno')+'/'];
		 hmService.dataCompany =  () => {
			 $.get(hmPath.gate('company',null,'data/current'), { 'headers' : 'value' } , (data) => {
				 if (jQuery.isEmptyObject(data) || jQuery.isEmptyObject(cdataPan) ) {
					 $('.hm-data-a1').html(cdataPan[0]);
					 $('.hm-data-a2').html(cdataPan[1]);
		 			 $('.hm-data-a3').html(cdataPan[2]);
		 			 $('.hm-data-a4').html(cdataPan[3]);
				 }else {
					 $.each(data, function(key, val) {
					 	 $('.hm-data-a1').html(val.hcName);
						 $('.hm-data-a2').html(val.hcAddress);
						 $('.hm-data-a3').html(val.hcSlogan);
						 $('.hm-data-a4').html(val.hcRegNo);
						 // prevent next time mining...
						 hmService.hcwr( 'cname' , val.hcName , 360);
						 hmService.hcwr( 'caddress' , val.hcAddress , 360);
						 hmService.hcwr( 'cclogan' , val.hcSlogan , 360);
						 hmService.hcwr( 'ccregno' , val.hcRegNo , 360);
					 });
				 }
			 }).done(() => {
         //prefered Language
         var x = (hmService.hcr('localize'))? hmService.hcr('localize') : 'en' ;
         //adjust dropdown
         $('.hm-la-0').val(x);
         //set set Language view
         hmService.html('.hm-sys-local',hmService.abbr.lang[x]);
         //prefered country
         var y = (hmService.hcr('region'))? hmService.hcr('region') : 'sa' ;
         //adjust dropdown
         $('.hm-la-01').val(y);
         //set set Language view
         hmService.html('.hm-sys-region',hmService.abbr.country[y]);
			 });

		 }
     hmService.dataCompany();

     $('.hm-inpt-modal-a1').val(hmService.hcr('cname') );
		 $('.hm-inpt-modal-a2').attr("placeholder" , 'Enter new company address ie. Ministers Village Ntinda , Block 234 , Ntinda Kampala Ug' );
     $('.hm-inpt-modal-a3').attr("placeholder" , 'We are the best' );
		 $('.hm-inpt-modal-a4').attr('placeholder','ie. U000 , CN370 , KY748 , US748');
		 // --set default phone number value
		 //$('.v-tel').val() = hmGlobals('ctcode');

		 // set username @ adminstrtion side
		 hmService.createUrl('hm-inpt-b7','hm-inpt-b6' ,'') ;

		 // implement changes as soon as made
		 $( ".hm-btn-modal-a1" ).click( () => {
			 hmService.tempCompany('hm-inpt-modal-a1','hm-data-a1','cname') ;
			 hmService.saveCompany('hcName','cname');
		 });

     $( ".hm-btn-modal-a2" ).click( () => {
        // hilmacs default comment
         hmService.tempCompany('hm-inpt-modal-a2','hm-data-a2','caddress') ;
				 hmService.saveCompany('hcAddress','caddress');
     });

		 $( ".hm-btn-modal-a3" ).click( () => {
        // hilmacs default comment
         hmService.tempCompany('hm-inpt-modal-a3','hm-data-a3','cclogan') ;
				 hmService.saveCompany('hcSlogan','cclogan');
     });

		 $( ".hm-btn-modal-a4" ).click( () => {
        // hilmacs default comment
         hmService.tempCompany('hm-inpt-modal-a4','hm-data-a4','ccregno') ;
				 hmService.saveCompany('hcRegNo','ccregno');
     });

     // hilmacs default comment
     $( ".hm-btn-modal-e1" ).click( () => {
         // hilmacs default comment
				 var x = ({
					 name:$('.hm-inpt-modal-e1').val(),
					 abbr:$('.hm-inpt-modal-e2').val()
			   });
				 if (x.name && x.abbr) {
           $.post(hmPath.gate('exams',null,'data/'), { 'a' : x.name , 'b': x.abbr } ).done( () => {
           	hmService.hapiExams();
           });
				 } else {
           alert(hmLang.locals('noChg'));
				 }
     });

		 // hilmacs default comment
     $( ".hm-btn-modal-c1" ).click( () => {
         // hilmacs default comment
				 var x = ({
					 name:$('.hm-inpt-modal-c1').val(),
					 stream:$('.hm-inpt-modal-c2').val()
			   });
				 if (x.name) {
           $.post(hmPath.gate('classes',null,'data/'), { 'a' : x.name , 'b': x.stream } ).done( () =>{
						 hmService.hapiClasses();
					 });
				 } else {
           alert(hmLang.locals('noChg'));
				 }
     });

		 // hilmacs default comment
     $( ".hm-btn-modal-s1" ).click( () => {
         // hilmacs default comment
				 var x = ({
					 name:$('.hm-inpt-modal-s1').val(),
					 unit:$('.hm-inpt-modal-s2').val()
			   });
				 if (x.name) {
           $.post(hmPath.gate('subjects',null,'data/'), { 'a' : x.name , 'b': x.unit } ).done( ()=> {
           	 hmService.hapiSubjects();
           });
				 } else {
           alert(hmLang.locals('noChg'));
				 }
     });

		 // hilmacs default comment
     $( ".hm-btn-modal-t1" ).click( () => {
         // hilmacs default comment
				 var x = ({
					 name:$('.hm-inpt-modal-t1').val()
			   });
				 if (x.name) {
           $.post(hmPath.gate('terms',null,'data/'), { 'a' : x.name} ).done( () => {
           	hmService.hapiTerms();
					}).fail( () => {
						//console.log('term failed');
					});
				 } else {
           alert(hmLang.locals('noChg'));
				 }
     });

		 // hilmacs default comment
     $( ".hm-btn-modal-d1" ).click( () => {
         // hilmacs default comment
				 var x = ({
					 name:$('.hm-inpt-modal-d1').val(),
					 capt:$('.hm-inpt-modal-d2').val(),
					 asst:$('.hm-inpt-modal-d3').val(),
					 ward:$('.hm-inpt-modal-d4').val(),
					 cap:$('.hm-inpt-modal-d5').val()
			   });
				 if (x.name && x.capt) {
           $.post(hmPath.gate('dorms',null,'data/'), { 'a' : x.name , 'b': x.capt , 'c': x.asst , 'd': x.ward , 'e': x.cap } ).done( () => {
           	hmService.hapiDorms();
					}).fail( () => {
						//console.log('term failed');
					});
				 } else {
           alert(hmLang.locals('noChg'));
				 }
     });

     // hide nav-tabs
     $( ".hm-nav-bar-top-sandwich" ).click( () => {
        // hilmacs default comment
         $( ".hm-nav-bar-aside" ).toggle("slow");
     });

		 // hilmacs default comment
		 // hilmacs default comment
		 $(".hm-inpt-search-top-0").on("submit", function(){
			//Code: Action (like ajax...)
			return false;
		});

		 // display off elements
		 $('.hm-disp-off').hide('slow') ; //global
		 $('.hm-disp-off-2').fadeOut(2000) ; //global
		 $('.hm-disp-off-5').fadeOut(5000) ; //global
		 $('.hm-disp-off-7').fadeOut(7000) ; //global
		 $('.hm-disp-off-no-animation').fadeOut("fast"); //global
		 // hilmacs default comment
		 $( ".hm-disp-btn-settings" ).click( () => {
		    // hilmacs default comment
		     $('.hm-disp-settings').show("slow");
				 $('.hm-disp-btn-settings').hide('slow');
		 });

     // back to previous page
		 $('.hm-prev-pg').click( () => {
			 history.go(-1);
		 });

     // hilmacs custom search form uri
     $( ".hm-inpt-search-top-form" ).submit(function( event ) {
        // alert( "Handler for .submit() called." );
				var a = $('.hm-inpt-search-top').val();
        hmService.redirect('/search/'+a);
        event.preventDefault();
     });

		 // wibgates hire dev.s
		 hmService.consoleSneak =  () => {
       console.log('If some told that you to come here and pass scripts to steal information, it\'s a scam : instead contact wibgates for a  job : jobs@hilmmacs.com ');
		 };

		 hmService.consoleSneak();

		 // hilmacs form captures
		 $( ".hm-inpt-acc-form-1" ).click( () => {
		    // hilmacs default comment
				 var a = {
				 hcUsername:$('.hm-inpt-b1').val(),
				 hcPassword:$('.hm-inpt-b5').val(),
				 hcFullnames:$('.hm-inpt-b1').val(),
				 hcGender:$('.hm-inpt-b9').val(),
				 hcPhone:$('.hm-inpt-b3').val(),
				 hcPosition:"admin",
				 hcUseRole:$('.hm-inpt-b7').val(),
         hcImgPath:$('.hm-inpt-b8').val()
       };
         if (a.hcUsername && a.hcPassword && a.hcFullnames && a.hcGender && a.hcPhone  ) {
					 if (jQuery.isEmptyObject(a)) {
						 alert(hmLang.locals('noData'));
				   }else{
						 $.post(hmPath.gate('users',null,'data/'), { "a": a.hcUsername , "b":a.hcFullnames , "c":a.hcGender , "d":a.hcPhone , "e":a.hcPosition , "f":a.hcUseRole , "g":a.hcPassword , "paste" : a
	  			   }).always( () => {
	  					 $('.hm-reg-bd-admin').empty();
	  					 $('.hm-reg-bd-admin').html("<br><br><center>"+hmService.hcr('loaderIcon_sm')+"Proccessing user information...</center><br><br>");
	           	 $('.hm-reg-hd-admin').html("<small>Registering : "+a.hcFullnames+" , Please wait...<small>");
	           }).done( () => {
							 $('.hm-reg-bd-admin').empty();
 							 $('.hm-reg-bd-admin').html("<br><br><center><h3>Account is now ready ! <br> <br><a href='/accounts/view/' class='btn btn-primary'>View Profile Here</a> -or- <a href='/accounts/adminstrator/' class='btn btn-warning'>Create New Account</a><br></h3></center><br><br>");
 							 $('.hm-reg-hd-admin').html("<span class='text-success'>"+a.hcFullnames+"\'s </span> Account is ready for use.");
	           }).fail( () => {
	           	 console.log('failed...');
	           });
					 }
         }else {
         	alert(hmLang.locals('noData'));
         }
		 });

     // check if role exits
		 var hmCheckRole =  (a) => {
       $.get(hmPath.gate('users',null,'check/'+a) , (data) => {
         if (jQuery.isEmptyObject(data)) {
					 // do nothing wibgates
         }else {
           $('.hm-user-role-'+a+'').remove();
         }
       });
		 }

		 // ping all available roles
		 hmCheckRole('director');hmCheckRole('bursur');hmCheckRole('hrm');hmCheckRole('principal');hmCheckRole('dos');
		 hmCheckRole('librarian');hmCheckRole('nurse');hmCheckRole('ehtics');

		 var hmCount =  (x) => {
       $.get(hmPath.gate(x,null,'count/') , (data) => {
				 // hilmacs form default comment
				 $('.hm-'+x+'-count').html(data);
       });
		 }
		 hmCount('users'); hmCount('classes'); hmCount('subjects'); hmCount('dorms');

     // Creating accounts
     $('.hm-btn-t-t-c-0').hide('slow');
     $('.hm-inpt-t-bind-2').hide('slow');
     $('.hm-inpt-t-bind-3').hide('slow');
		 $( ".hm-save-btn-t-bind-1" ).click( () => {

         var x = hmService.val('.hm-inpt-t-2').trim(' ');
         if(x){
           //check username if it exits
           $.getJSON(hmPath.gate('teachers',null,'check/'+x), (data) => {
             if (data.status == 1 ) {
                 hmService.html('.hm-hd-t-1',`<span class="text-danger ucwords">Username \'${x}\' already exits,</span> Try ${x}_${hmService.random()}`);
             } else {
               // hilmacs default comment
               $('.hm-inpt-t-bind-1').hide('slow');
               $('.hm-inpt-t-bind-2').show("slow");
               $('.hm-save-btn-t-bind-1').hide('slow');
             }
           });
         }else {
           hmService.html('.hm-hd-t-1',`<span class="text-danger ucwords">Please choose a username, </span> Try ${x}_${hmService.random()}`);
         }
		 });

     $( ".hm-save-btn-t-bind-1-1" ).click( () => {
		    // hilmacs default comment
				 $('.hm-inpt-t-bind-1').show('slow');
 		     $('.hm-inpt-t-bind-2').hide("slow");
				 $('.hm-save-btn-t-bind-1').show('slow');
		 });

     // enabled for premium accounts
     /*
     $( ".hm-save-btn-t-bind-2" ).click( () => {
		    // hilmacs default comment
 		     $('.hm-inpt-t-bind-2').hide("slow");
 				 $('.hm-inpt-t-bind-3').show('slow');
				 $('.hm-save-btn-t-bind-2').show('slow');
		 });

     $( ".hm-save-btn-t-bind-2-1" ).click( () => {
		    // hilmacs default comment
 		     $('.hm-inpt-t-bind-2').show("slow");
 				 $('.hm-inpt-t-bind-3').hide('slow');
				 $('.hm-save-btn-t-bind-2').show('slow');
		 });

     */

     // make up time
     hmService.makeSlotTime = () => {
       var x,y,z,i;
       x = 23 ;
       y = 4 ;
       while (x >= y ) {
         $('.hm-std-time-slot').append(`<th class="padding-10">${y++}</th>`);
       }
     }
     hmService.makeSlotTime();

     /**
      * capture time against slot
     */
     // hilmacs default comment
     $( ".t-t-slot" ).click(function() {
       // hilmacs default comment
        if ($(this).hasClass('t-t-slot-r')) {
          $(this).removeClass('time-slot');
          $(this).removeClass('t-t-slot-r');
        }else {
          $(this).addClass('time-slot');
          $(this).addClass('t-t-slot-r');
          /*var x = {
            day  : $(this).parent().attr('class') ,
            time : parseInt($(this).attr('class').split(' ').slice(-3)[0].split('-')[2])
          }
          // clicked slot
          console.log(x); */
        }
     });

     /**
      * slot digger
     */
     hmService.slotDigger = () => {
         // check on monday
         var x,y,z,i,v,u,o,p,r,a,b,c,d,e,f,g,h ;

         x = $('.padding-10').filter('.time-slot');

         console.log(x.length);

     }

     // refresh time slots to null
     hmService.slotRefresh = () => {
       $('.t-t-slot').removeClass('time-slot');
       $('.t-t-slot').removeClass('t-t-slot-r');
     }
     // onChange of class:: make new time board
     $( ".hm-sv-s-classes" ).change(() => {
        // hilmacs default comment
        hmService.slotRefresh();
     });

     $( ".hm-auto-t-t-2" ).click(() => {
        // hilmacs default comment
        hmService.slotRefresh();
     });

     //map to a particular slot
     hmService.slotPin = (x,y) => {
       $('.hm-t-t-slot-'+x+'-'+y).addClass('time-slot');
       $('.hm-t-t-slot-'+x+'-'+y).addClass('t-t-slot-r');
     }
     // hilmacs default comment
     $( ".hm-auto-t-t-1" ).click(() => {
        var x,y,z,i,v,u,o,p,r ;
         //auto assign schedules
         hmService.slotRefresh();
         /**
          * unknown day/time frames
          * considering the week cycle of 7 days
         */
         x = hmService.slotRandom();//hilmacsAutoTablings
         y = hmService.slotRandom();//hilmacsAutoTablings
         z = hmService.slotRandom();//hilmacsAutoTablings
         v = hmService.slotRandom();//hilmacsAutoTablings
         u = hmService.slotRandom();//hilmacsAutoTablings
         o = hmService.slotRandom();//hilmacsAutoTablings
         p = hmService.slotRandom();//hilmacsAutoTablings

         hmService.hcwr('' , JSON.stringify(x) , 1 );

         hmService.slotFrames = {
           frame : null
         }

         /**
          * lecture/subject session time
          * ::how long does the lecture take
          * ::hilmacs international standard lecture time observes 3hours max
          * ::``the most powerfull algorithim i have ever created`` , {wibgates.Kenneth}
          * ::the automated school time table {v.0.0.1}{as of 11/14/2017 7:55pm}
         */
         i = parseInt($('.hm-inpt-t-00-00-2').val());
         r = parseInt($('.hm-inpt-t-00-00-3').val());
         if (i == 1 ) {
           // switch slot with day
           if (r == 1 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
           } else if (r == 2 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(y.day , y.slot1);//slot 1
           } else if (r == 3 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(z.day , z.slot1);//slot 3
           }else if (r == 4 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(z.day , z.slot1);//slot 3
             hmService.slotPin(v.day , v.slot1);//slot 4
           }else if (r == 5) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(z.day , z.slot1);//slot 3
             hmService.slotPin(v.day , v.slot1);//slot 4
             hmService.slotPin(u.day , u.slot1);//slot 5
           }else if (r == 6 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(z.day , z.slot1);//slot 3
             hmService.slotPin(v.day , v.slot1);//slot 4
             hmService.slotPin(u.day , u.slot1);//slot 5
             hmService.slotPin(o.day , o.slot1);//slot 6
           }else if (r == 7 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(z.day , z.slot1);//slot 3
             hmService.slotPin(v.day , v.slot1);//slot 4
             hmService.slotPin(u.day , u.slot1);//slot 5
             hmService.slotPin(o.day , o.slot1);//slot 6
             hmService.slotPin(p.day , p.slot1);//slot 7
           }

           //hmService.slotFrames.frame = x.day +':'+ x.slot1 + ',' + y.day +':'+ y.slot1 + z.day +':'+ z.slot1 ;
         } else if (i == 2) {
           if (r == 1 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
           } else if (r == 2 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
           } else if (r == 3 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
           }else if (r == 4 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
             hmService.slotPin(v.day , v.slot1);//slot 1
             hmService.slotPin(v.day , v.slot2);//slot 2
           }else if (r == 5) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
             hmService.slotPin(v.day , v.slot1);//slot 1
             hmService.slotPin(v.day , v.slot2);//slot 2
             hmService.slotPin(u.day , u.slot1);//slot 1
             hmService.slotPin(u.day , u.slot2);//slot 2
           }else if (r == 6 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
             hmService.slotPin(v.day , v.slot1);//slot 1
             hmService.slotPin(v.day , v.slot2);//slot 2
             hmService.slotPin(u.day , u.slot1);//slot 1
             hmService.slotPin(u.day , u.slot2);//slot 2
             hmService.slotPin(o.day , o.slot1);//slot 1
             hmService.slotPin(o.day , o.slot2);//slot 2
           }else if (r == 7 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
             hmService.slotPin(v.day , v.slot1);//slot 1
             hmService.slotPin(v.day , v.slot2);//slot 2
             hmService.slotPin(u.day , u.slot1);//slot 1
             hmService.slotPin(u.day , u.slot2);//slot 2
             hmService.slotPin(o.day , o.slot1);//slot 1
             hmService.slotPin(o.day , o.slot2);//slot 2
             hmService.slotPin(p.day , p.slot1);//slot 2
             hmService.slotPin(p.day , p.slot2);//slot 2
           }
         } else if (i == 4 ) {
           if (r == 1 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(x.day , x.slot3);//slot 3
             hmService.slotPin(x.day , x.slot4);//slot 4
           } else if (r == 2 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(x.day , x.slot3);//slot 3
             hmService.slotPin(x.day , x.slot4);//slot 4
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(y.day , y.slot3);//slot 3
             hmService.slotPin(y.day , y.slot4);//slot 4
           } else if (r == 3 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(x.day , x.slot3);//slot 3
             hmService.slotPin(x.day , x.slot4);//slot 4
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(y.day , y.slot3);//slot 3
             hmService.slotPin(y.day , y.slot4);//slot 4
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
             hmService.slotPin(z.day , z.slot3);//slot 3
             hmService.slotPin(z.day , z.slot4);//slot 4
           }else if (r == 4 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(x.day , x.slot3);//slot 3
             hmService.slotPin(x.day , x.slot4);//slot 4
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(y.day , y.slot3);//slot 3
             hmService.slotPin(y.day , y.slot4);//slot 4
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
             hmService.slotPin(z.day , z.slot3);//slot 3
             hmService.slotPin(z.day , z.slot4);//slot 4
             hmService.slotPin(v.day , v.slot1);//slot 1
             hmService.slotPin(v.day , v.slot2);//slot 2
             hmService.slotPin(v.day , v.slot3);//slot 3
             hmService.slotPin(v.day , v.slot4);//slot 4
           }else if (r == 5) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(x.day , x.slot3);//slot 3
             hmService.slotPin(x.day , x.slot4);//slot 4
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(y.day , y.slot3);//slot 3
             hmService.slotPin(y.day , y.slot4);//slot 4
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
             hmService.slotPin(z.day , z.slot3);//slot 3
             hmService.slotPin(z.day , z.slot4);//slot 4
             hmService.slotPin(v.day , v.slot1);//slot 1
             hmService.slotPin(v.day , v.slot2);//slot 2
             hmService.slotPin(v.day , v.slot3);//slot 3
             hmService.slotPin(v.day , v.slot4);//slot 4
             hmService.slotPin(u.day , u.slot1);//slot 1
             hmService.slotPin(u.day , u.slot2);//slot 2
             hmService.slotPin(u.day , u.slot3);//slot 3
             hmService.slotPin(u.day , u.slot4);//slot 4
           }else if (r == 6 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(x.day , x.slot3);//slot 3
             hmService.slotPin(x.day , x.slot4);//slot 4
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(y.day , y.slot3);//slot 3
             hmService.slotPin(y.day , y.slot4);//slot 4
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
             hmService.slotPin(z.day , z.slot3);//slot 3
             hmService.slotPin(z.day , z.slot4);//slot 4
             hmService.slotPin(v.day , v.slot1);//slot 1
             hmService.slotPin(v.day , v.slot2);//slot 2
             hmService.slotPin(v.day , v.slot3);//slot 3
             hmService.slotPin(v.day , v.slot4);//slot 4
             hmService.slotPin(u.day , u.slot1);//slot 1
             hmService.slotPin(u.day , u.slot2);//slot 2
             hmService.slotPin(u.day , u.slot3);//slot 3
             hmService.slotPin(u.day , u.slot4);//slot 4
             hmService.slotPin(o.day , o.slot1);//slot 1
             hmService.slotPin(o.day , o.slot2);//slot 2
             hmService.slotPin(o.day , o.slot3);//slot 3
             hmService.slotPin(o.day , o.slot4);//slot 4
           }else if (r == 7 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(x.day , x.slot3);//slot 3
             hmService.slotPin(x.day , x.slot4);//slot 4
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(y.day , y.slot3);//slot 3
             hmService.slotPin(y.day , y.slot4);//slot 4
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
             hmService.slotPin(z.day , z.slot3);//slot 3
             hmService.slotPin(z.day , z.slot4);//slot 4
             hmService.slotPin(v.day , v.slot1);//slot 1
             hmService.slotPin(v.day , v.slot2);//slot 2
             hmService.slotPin(v.day , v.slot3);//slot 3
             hmService.slotPin(v.day , v.slot4);//slot 4
             hmService.slotPin(u.day , u.slot1);//slot 1
             hmService.slotPin(u.day , u.slot2);//slot 2
             hmService.slotPin(u.day , u.slot3);//slot 3
             hmService.slotPin(u.day , u.slot4);//slot 4
             hmService.slotPin(o.day , o.slot1);//slot 1
             hmService.slotPin(o.day , o.slot2);//slot 2
             hmService.slotPin(o.day , o.slot3);//slot 3
             hmService.slotPin(o.day , o.slot4);//slot 4
             hmService.slotPin(p.day , p.slot1);//slot 2
             hmService.slotPin(p.day , p.slot2);//slot 2
             hmService.slotPin(p.day , p.slot3);//slot 3
             hmService.slotPin(p.day , p.slot4);//slot 4
           }
         }else{
           if (r == 1 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(x.day , x.slot3);//slot 3
           } else if (r == 2 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(x.day , x.slot3);//slot 3
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(y.day , y.slot3);//slot 3
           } else if (r == 3 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(x.day , x.slot3);//slot 3
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(y.day , y.slot3);//slot 3
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
             hmService.slotPin(z.day , z.slot3);//slot 3
           }else if (r == 4 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(x.day , x.slot3);//slot 3
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(y.day , y.slot3);//slot 3
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
             hmService.slotPin(z.day , z.slot3);//slot 3
             hmService.slotPin(v.day , v.slot1);//slot 1
             hmService.slotPin(v.day , v.slot2);//slot 2
             hmService.slotPin(v.day , v.slot3);//slot 3
           }else if (r == 5) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(x.day , x.slot3);//slot 3
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(y.day , y.slot3);//slot 3
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
             hmService.slotPin(z.day , z.slot3);//slot 3
             hmService.slotPin(v.day , v.slot1);//slot 1
             hmService.slotPin(v.day , v.slot2);//slot 2
             hmService.slotPin(v.day , v.slot3);//slot 3
             hmService.slotPin(u.day , u.slot1);//slot 1
             hmService.slotPin(u.day , u.slot2);//slot 2
             hmService.slotPin(u.day , u.slot3);//slot 3
           }else if (r == 6 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(x.day , x.slot3);//slot 3
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(y.day , y.slot3);//slot 3
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
             hmService.slotPin(z.day , z.slot3);//slot 3
             hmService.slotPin(v.day , v.slot1);//slot 1
             hmService.slotPin(v.day , v.slot2);//slot 2
             hmService.slotPin(v.day , v.slot3);//slot 3
             hmService.slotPin(u.day , u.slot1);//slot 1
             hmService.slotPin(u.day , u.slot2);//slot 2
             hmService.slotPin(u.day , u.slot3);//slot 3
             hmService.slotPin(o.day , o.slot1);//slot 1
             hmService.slotPin(o.day , o.slot2);//slot 2
             hmService.slotPin(o.day , o.slot3);//slot 3
           }else if (r == 7 ) {
             hmService.slotPin(x.day , x.slot1);//slot 1
             hmService.slotPin(x.day , x.slot2);//slot 2
             hmService.slotPin(x.day , x.slot3);//slot 3
             hmService.slotPin(y.day , y.slot1);//slot 1
             hmService.slotPin(y.day , y.slot2);//slot 2
             hmService.slotPin(y.day , y.slot3);//slot 3
             hmService.slotPin(z.day , z.slot1);//slot 1
             hmService.slotPin(z.day , z.slot2);//slot 2
             hmService.slotPin(z.day , z.slot3);//slot 3
             hmService.slotPin(v.day , v.slot1);//slot 1
             hmService.slotPin(v.day , v.slot2);//slot 2
             hmService.slotPin(v.day , v.slot3);//slot 3
             hmService.slotPin(u.day , u.slot1);//slot 1
             hmService.slotPin(u.day , u.slot2);//slot 2
             hmService.slotPin(u.day , u.slot3);//slot 3
             hmService.slotPin(o.day , o.slot1);//slot 1
             hmService.slotPin(o.day , o.slot2);//slot 2
             hmService.slotPin(o.day , o.slot3);//slot 3
             hmService.slotPin(p.day , p.slot1);//slot 2
             hmService.slotPin(p.day , p.slot2);//slot 2
             hmService.slotPin(p.day , p.slot3);//slot 3
           }
         }

     });




     // teachers and students accounts
     hmService.account.create = (x) => {
       // teacher's account
       if (x == 'teacher') {
         $( ".hm-save-btn-t-bind-2" ).click(() => {
            // hilmacs default comment
            hmService.account.teacher.classes = {
              main1 : $('.hm-inpt-t-9').val()  + ',' + $('.hm-inpt-t-13').val() ,
              main2 : $('.hm-inpt-t-10').val() + ',' + $('.hm-inpt-t-14').val() ,
              main3 : $('.hm-inpt-t-11').val() + ',' + $('.hm-inpt-t-15').val() ,
              main4 : $('.hm-inpt-t-12').val() + ',' + $('.hm-inpt-t-16').val()

            }
            $('.hm-sv-s-classes').empty();
            $.each(hmService.account.teacher.classes, (key, val) => {
              var dx = val.split(',')[0];
              var dy = val.split(',')[1];
              if (dx == 0 || dx == '0' ) {
              }else {
                $.get(hmPath.gate('classes',null,'data/'+dx) , (data) => {
                  if (dy == 0 || dy == '0') {
                    $('.hm-sv-s-classes').append(`<option value="${data._id}_0">${data.hcName}</option>`);
                  } else if (dy ==  1 || dy == '1') {
                      $('.hm-sv-s-classes').append(`<option value="${data._id}_1">${data.hcName} (All Streams)</option>`);
                  } else {
                      $('.hm-sv-s-classes').append(`<option value="${data._id}_${dy}">${data.hcName} ${dy}</option>`);
                  }
                });
              }
            });
         });

         // hilmacs default comment
         $( ".hm-save-btn-t-bind-2-2" ).click( () => {
             // hilmacs default comment
             hmService.slotDigger();
         });

         $( ".hm-save-btn-t-bind-2" ).click(function() {
             // hilmacs default comment
             // step 1 : profile
             hmService.account.teacher.profile = [
               $('.hm-inpt-t-1').val(),
               $('.hm-inpt-t-2').val(),
               $('.hm-inpt-t-3').val(),
               $('.hm-inpt-t-4').val(),
               $('.hm-inpt-t-5').val(),
               $('.hm-inpt-t-6').val(),
               $('.hm-inpt-t-7').val()
             ]

             // step 2
             hmService.account.teacher.classes = [
               $('.hm-inpt-t-9').val()  + '_' + $('.hm-inpt-t-13').val() ,
               $('.hm-inpt-t-10').val() + '_' + $('.hm-inpt-t-14').val() ,
               $('.hm-inpt-t-11').val() + '_' + $('.hm-inpt-t-15').val() ,
               $('.hm-inpt-t-12').val() + '_' + $('.hm-inpt-t-16').val()
             ]

             hmService.account.teacher.subjects = [
               hmService.val('.hm-inpt-t-17') + '_' + hmService.val('.hm-inpt-t-00-1') ,
               hmService.val('.hm-inpt-t-18') + '_' + hmService.val('.hm-inpt-t-00-2') ,
               hmService.val('.hm-inpt-t-19') + '_' + hmService.val('.hm-inpt-t-00-3') ,
               hmService.val('.hm-inpt-t-20') + '_' + hmService.val('.hm-inpt-t-00-4')
             ]

             $.post(hmPath.gate('teachers',null,'data/'), {
               'about' : hmService.account.teacher.profile ,
               'subjects' : hmService.account.teacher.subjects ,
               'classes' : hmService.account.teacher.classes
               }, (data) => {
               console.log(data);
             });

         });
       }else if (x == 'student') {

       }

     }

     hmService.account.create('teacher');



});

// some hilmacs globals
function hmGlobals(a) {
   switch (a) {
		 // system lable
   	case 'lable':
      return 'Hilmacs';
   		break;
		 // system developer {author}
		case 'dev':
       return 'Wibgates Kenneth';
				break;
		 // system date
		 case 'date':
       return $.now();
		 	break;
     // system main site
		 case 'siteMain':
       return 'hilmacs.com/';
		 	break;
		 // default tel value
		 case 'ctcode':
			 var supportedCodes = ['+256','+1','+255','+97','+44'];
			 // default country code
        return supportedCodes[0] ;
 		 	break;
		 case 'conTestUri':
		 	 return 'https://app.hilmacs.com/api/verify/test.inc';
		 	break;
   	default:
       return  '';
   }
}


/**
 * shuffle multiple array
 * function v.0.0.0.1
*/
hmService.shuffleArray =  (array) => {
  var d = array.length, a, b;

  // While there remain elements to shuffle...
  while (0 !== d) {

    // Pick a remaining element...
    b = Math.floor(Math.random() * d);
    d -= 1;

    // And swap it with the current element.
    a = array[d];
    array[d] = array[b];
    array[b] = a;
  }

  return array;
}

// generate random number
hmService.random = () => {
	 var random;
	 random = Math.ceil(Math.random() * 10000) + 2017; // {Togikwato year : in Uganda}
	 random = (Math.floor(Math.random() * 2) <= 0) ? -1*-(random) : random;
	 return random;
}

/**
 * major rand number for time slots
 * powerfull algorithim  dev on 11/14/2017 {2:14pm} by gates the great
 * the response must be 4-6 o 7-12 o 13-17 o 18-23 not 6-7 , 12-13 , 17-18
*/
hmService.slotRandom = () => {
  var random ,x,y,z,p;
  random = Math.ceil(Math.random() * 25) ;
  random = (Math.floor(Math.random() * 2) <= 0) ? -1*-(random) : random;

  // dates
  p = hmService.vars.array.date ;

  // shuffle thru dates
  z = hmService.shuffleArray(p)[0];

  // don't allow interfaces with breaks
  if (random == 22 || random == 25 || random == 24 ) {
    random =  20 ;
  }else if (random == 6 || random == 2 ) {
    random = 5 ;
  }else if (random == 7 || random == 0 ) {
    random =  9 ;
  }else if (random == 12 || random == 4  ) {
    random =  11 ;
  }else if (random == 13 || random == 1 ) {
    random =  15 ;
  }else if (random == 17 || random == 3 ) {
    random =  21 ;
  }else if (random == 23 || random == 18) {
    random =  10 ;
  }

  var t = random + 1 ;
  var a = t + 1 ;
  var x = random - 1 ;
  var t = {slot1:x,slot2:random,slot3:t,slot4:a,day:z} ;
  return t ;
}

// set role path url
hmService.createUrl = (a,b,c) => {
	var a = $('.'+a).val();
	var a = hmGlobals('siteMain')+hmService.hcr('ccregno')+'/'+a ;
	$('.'+b).attr("value" , a );
	if(c !== '' ){
    $('.'+c).attr("value" , a );
	}
}

// val() are the same
function dupVal(a,b) {
	var a = $('.'+a).val();
	$('.'+b).attr("value" , a );
}

function virTalUsername(a,b) {
	var a = $('.'+a).val();
  var a = a.split(' ');
  $('.'+b).attr("value" , a[0]+'_'+hmService.random() );
}

/**
 * hilmacs delete bubble
*/
// remove data globaly without animation
hmService.delBubble = (b,a) => { // where{x=>path,z=>id}
  // hilmacs default comment
  $.delete(hmPath.gate(b,null,'data/'+a)).always( () => {
     hmService.html('.'+a+'_btn', hmService.hcr('loaderIcon_sm') );
  }).done( () => {
    // control view
    setInterval(function () {
      $('.'+a+'_off').hide(2000);
    }, 2000);
  }).fail( () => {
    alert('Deletion failed');
  });
}

// --bring href to life on element
function hmHref(a) {
    return hmService.redirect(a) ;
}

//prevent default
hmService.prevDefault = (x) => {
  $( ''+x+'' ).submit(function( event ) {
     event.preventDefault();
  });
}

//hilmace get value
hmService.val = (x) => {
  return $(''+x+'').val();
}

// --check connectivity
hmService.connect = new Object() ;
hmService.connect.isConnected = () => {
  $.getJSON(hmPath.gate('connectivity',web,'check'), function(data) {
    if (jQuery.isEmptyObject(data)) {
       // clock out...
    }
 });
}
